<% content_for :page_title, "Partials" %>

<!-- Page Header -->
<div class="page-header">
  <div class="page-header-left">
    <h2>Header & Footer</h2>
    <p class="page-header-subtitle">Design reusable header and footer for your pages</p>
  </div>
</div>

<!-- Partials Grid -->
<div class="partials-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
  <% @partials.each do |partial| %>
    <div class="card" style="padding: 0; overflow: hidden;">
      <!-- Partial Preview -->
      <div style="background: var(--bg-muted); padding: 2rem; min-height: 120px; display: flex; align-items: center; justify-content: center; border-bottom: 1px solid var(--border-color);">
        <% if partial.content.present? %>
          <div style="font-size: 0.75rem; color: var(--text-muted); text-align: center;">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.5; margin-bottom: 0.5rem;">
              <% if partial.header? %>
                <rect x="3" y="3" width="18" height="6" rx="1"/>
                <rect x="3" y="12" width="18" height="9" rx="1" opacity="0.3"/>
              <% else %>
                <rect x="3" y="3" width="18" height="9" rx="1" opacity="0.3"/>
                <rect x="3" y="15" width="18" height="6" rx="1"/>
              <% end %>
            </svg>
            <div>Content saved</div>
          </div>
        <% else %>
          <div style="font-size: 0.75rem; color: var(--text-muted); text-align: center;">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.3; margin-bottom: 0.5rem;">
              <% if partial.header? %>
                <rect x="3" y="3" width="18" height="6" rx="1"/>
                <rect x="3" y="12" width="18" height="9" rx="1" opacity="0.3"/>
              <% else %>
                <rect x="3" y="3" width="18" height="9" rx="1" opacity="0.3"/>
                <rect x="3" y="15" width="18" height="6" rx="1"/>
              <% end %>
            </svg>
            <div>No content yet</div>
          </div>
        <% end %>
      </div>

      <!-- Partial Info -->
      <div style="padding: 1.25rem;">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
          <div>
            <h3 style="margin: 0 0 0.25rem 0; font-size: 1.125rem;"><%= partial.name %></h3>
            <span style="font-size: 0.75rem; color: var(--text-muted); text-transform: capitalize;"><%= partial.partial_type %></span>
          </div>
          <% if partial.active? %>
            <span class="badge badge-success">
              <span class="badge-dot"></span>
              Active
            </span>
          <% else %>
            <span class="badge badge-gray">
              <span class="badge-dot"></span>
              Inactive
            </span>
          <% end %>
        </div>

        <div style="display: flex; gap: 0.5rem;">
          <%= link_to editor_admin_partial_path(partial), class: "btn btn-primary btn-sm", style: "flex: 1;" do %>
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polygon points="12 2 2 7 12 12 22 7 12 2"/>
              <polyline points="2 17 12 22 22 17"/>
              <polyline points="2 12 12 17 22 12"/>
            </svg>
            Design
          <% end %>
          <%= link_to edit_admin_partial_path(partial), class: "btn btn-secondary btn-sm" do %>
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="3"/>
              <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1m15.36-5.64l-4.24 4.24m0 0L7.88 7.88m4.24 4.24l4.24 4.24m-8.48 0l4.24-4.24"/>
            </svg>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>

<!-- Info Box -->
<div class="card" style="margin-top: 1.5rem; background: var(--bg-muted);">
  <div style="display: flex; gap: 1rem; align-items: flex-start;">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="flex-shrink: 0; margin-top: 2px;">
      <circle cx="12" cy="12" r="10"/>
      <line x1="12" y1="16" x2="12" y2="12"/>
      <line x1="12" y1="8" x2="12.01" y2="8"/>
    </svg>
    <div>
      <p style="margin: 0 0 0.5rem 0; font-weight: 500;">How partials work</p>
      <p style="margin: 0; color: var(--text-muted); font-size: 0.875rem;">
        Header and footer partials are automatically included on pages where they're enabled.
        Each page has checkboxes to show or hide the header and footer independently.
        The partials are compiled with Tailwind CSS when saved.
      </p>
    </div>
  </div>
</div>
